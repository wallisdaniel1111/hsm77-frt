<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SABERHAWKS77 | Individualized Performance Plan</title>
    <style>
        :root {
            --apple-gray: #F5F5F7;
            --apple-blue: #007AFF;
            --apple-green: #34C759;
            --apple-yellow: #FFCC00;
            --apple-red: #FF3B30;
            --text-main: #1D1D1F;
            --text-secondary: #86868B;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--apple-gray);
            color: var(--text-main);
            margin: 0;
            -webkit-font-smoothing: antialiased;
        }

        header { padding: 60px 20px 20px; text-align: center; cursor: pointer; }
        header h1 { font-size: 48px; font-weight: 700; margin: 0; letter-spacing: -1.5px; text-transform: uppercase; }
        header p { font-size: 16px; font-weight: 400; color: var(--apple-blue); margin: 5px 0 0; letter-spacing: 2px; text-transform: uppercase; }

        .nav-tabs { display: flex; justify-content: center; gap: 20px; margin-bottom: 30px; }
        .tab-link { font-size: 11px; font-weight: 700; color: var(--apple-blue); text-transform: uppercase; cursor: pointer; opacity: 0.7; transition: 0.2s; }
        .tab-link:hover { opacity: 1; }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px 60px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
        .card { background: white; border-radius: 28px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.03); display: flex; flex-direction: column; }
        .span-2 { grid-column: span 2; }
        .tall { grid-row: span 2; }

        h2 { font-size: 20px; font-weight: 600; margin-top: 0; margin-bottom: 20px; }
        label { font-size: 10px; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 8px; display: block; }
        
        input, select { width: 100%; padding: 14px; border-radius: 14px; border: 1px solid #D2D2D7; background: #FBFBFD; font-size: 16px; margin-bottom: 15px; box-sizing: border-box; }

        .ring-container { position: relative; width: 170px; height: 170px; margin: auto; display: flex; align-items: center; justify-content: center; }
        svg.ring-svg { transform: rotate(-90deg); width: 170px; height: 170px; }
        circle { fill: none; stroke-width: 14; stroke-linecap: round; transition: stroke-dashoffset 1s ease; }
        .bg-ring { stroke: #F2F2F7; }
        .progress-ring { stroke: var(--apple-green); stroke-dasharray: 502; stroke-dashoffset: 502; }
        .percentage { font-size: 32px; font-weight: 700; position: absolute; }

        .btn-primary { background: var(--text-main); color: white; border: none; padding: 18px; border-radius: 35px; font-weight: 600; font-size: 16px; cursor: pointer; transition: all 0.2s; }
        
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; left: 0; 
            width: 100%; height: 100%; 
            background: rgba(245, 245, 247, 0.98); 
            z-index: 1000; 
            overflow-y: auto; 
            padding: 40px 0;
        }
        .modal-content { 
            max-width: 800px; 
            margin: 40px auto; 
            padding: 20px;
        }
        .close-x { position: sticky; top: 0; float: right; cursor: pointer; font-size: 24px; z-index: 1001; padding: 10px; font-weight: bold;}

        #output-section { grid-column: 1 / -1; display: none; margin-top: 20px; }
        .target-box { background: var(--apple-gray); padding: 25px; border-radius: 20px; text-align: center; }
        .stat-val { font-size: 32px; font-weight: 700; color: var(--apple-blue); }
        .rest-tag { font-size: 10px; font-weight: 800; color: var(--apple-red); background: rgba(255, 59, 48, 0.1); padding: 4px 10px; border-radius: 20px; margin: 10px auto 0; display: inline-block; }

        .roadmap-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 30px; }
        .week-box { background: #F2F2F7; padding: 20px; border-radius: 20px; position: relative; overflow: hidden; }
        .week-box h4 { margin: 0 0 10px; color: var(--apple-blue); font-size: 14px; text-transform: uppercase; }
        .week-box p { font-size: 13px; margin: 0; line-height: 1.4; color: var(--text-main); }
        .week-num { position: absolute; right: -10px; bottom: -10px; font-size: 60px; font-weight: 800; color: rgba(0,0,0,0.015); }

        footer { grid-column: 1 / -1; text-align: center; padding: 60px; font-size: 12px; color: var(--text-secondary); border-top: 1px solid #E5E5EA; margin-top: 40px; }
    </style>
</head>
<body>

<header onclick="resetApp()">
    <h1>SABERHAWKS77</h1>
    <p>Individualized Performance Plan</p>
</header>

<div class="nav-tabs">
    <span class="tab-link" onclick="toggleModal('how-it-works')">The Methodology</span>
    <span class="tab-link" onclick="toggleModal('roadmap-modal')">Tactical Roadmap</span>
</div>

<div class="container">
    <div class="card span-2">
        <h2>Physiological Calibration</h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
            <div>
                <label>Current 1.5Mi Time (MM:SS)</label>
                <input type="text" id="curRun" placeholder="12:30" onchange="updateUI()">
                <label>Push-ups (Max Reps)</label>
                <input type="number" id="curPush" placeholder="60" onchange="updateUI()">
                <label>Plank (MM:SS)</label>
                <input type="text" id="curPlank" placeholder="03:00" onchange="updateUI()">
            </div>
            <div>
                <label>Plan Start Date</label>
                <input type="date" id="startDate" onchange="updateUI()">
                <label>Training Surface</label>
                <select id="surface" onchange="updateUI()">
                    <option value="treadmill">Treadmill (1.0% Incline)</option>
                    <option value="outside">NAF Atsugi Track (344.8m)</option>
                </select>
                <div style="background: rgba(0,122,255,0.05); padding: 12px; border-radius: 12px; border-left: 3px solid var(--apple-blue);">
                    <p style="font-size: 11px; margin:0; line-height: 1.4;">The logic anchors your 42-day cycle to ensure your peak intersects with test day.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="card tall">
        <h2>Readiness Snapshot</h2>
        <div class="ring-container">
            <svg class="ring-svg">
                <circle class="bg-ring" cx="85" cy="85" r="80"></circle>
                <circle id="ring" class="progress-ring" cx="85" cy="85" r="80"></circle>
            </svg>
            <span id="percent-text" class="percentage">0%</span>
        </div>
        <div id="day-counter" style="text-align: center; font-size: 28px; font-weight: 700; margin-top: 20px;">Day 1</div>
        <div id="days-remaining" style="text-align: center; font-size: 11px; font-weight: 700; color: var(--apple-blue);">41 DAYS TO PEAK</div>
    </div>

    <div class="card">
        <h2>Atsugi Weather Audit</h2>
        <div style="display: flex; align-items: center; gap: 15px;">
            <span style="font-size: 32px; font-weight: 700;">10°C</span>
            <div style="font-size: 12px; color: var(--text-secondary);">
                <div>Wind: 8 mph S</div>
                <div>Condition: Sunny</div>
            </div>
        </div>
        <p style="font-size: 11px; color: var(--text-secondary); margin-top: 15px;">Target splits are adjusted for environmental friction.</p>
    </div>

    <div class="card">
        <h2>Allostatic Load Audit</h2>
        <label>Sleep Quality</label>
        <select id="sleep" onchange="updateUI()">
            <option value="3">Restorative (7+ hrs)</option>
            <option value="2">Moderated (5-6 hrs)</option>
            <option value="1">Deficit (&lt; 5 hrs)</option>
        </select>
        <label>Occupational Stress</label>
        <select id="stress" onchange="updateUI()">
            <option value="3">Low (Routine)</option>
            <option value="2" selected>Medium (Standard Ops)</option>
            <option value="1">High (Duty/Watch)</option>
        </select>
        <button class="btn-primary" onclick="calculateTarget()">Generate Session</button>
    </div>

    <div id="output-section" class="card span-2">
        <h2>Daily PRT Session Prescription</h2>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; align-items: start;">
            <div class="target-box">
                <label>1. Plank</label>
                <div id="target-plank" class="stat-val">--</div>
                <div class="rest-tag">REST 60s</div>
            </div>
            <div class="target-box">
                <label>2. Push-Ups</label>
                <div id="target-push" class="stat-val">--</div>
                <div class="rest-tag">REST 120s</div>
            </div>
            <div class="target-box" style="background: rgba(0,122,255,0.05); border: 1px solid var(--apple-blue);">
                <label style="color:var(--apple-blue)">3. Run Execution</label>
                <div id="target-run" class="stat-val" style="font-size: 26px;">--</div>
                <div id="run-volume" style="font-size: 12px; font-weight: 700; margin-top: 5px; text-transform: uppercase; color: var(--text-main);"></div>
                <div id="run-rest" style="font-size: 10px; color: var(--apple-red); font-weight: 800; margin-top: 5px;"></div>
            </div>
        </div>
        
        <div style="margin-top:20px; padding:20px; background:#F2F2F7; border-radius:18px;">
            <label style="color:var(--apple-blue);">Tier Trajectory</label>
            <div id="tier-display" style="font-size: 24px; font-weight: 700; margin: 10px 0;">--</div>
            <p id="tier-note" style="font-size: 13px; color: var(--text-secondary);"></p>
        </div>

        <div style="margin-top:15px; padding-top:15px; border-top:1px solid #D2D2D7;">
            <label style="color:var(--text-main); font-size: 11px; margin-bottom: 5px;">Evidence-Based Reference</label>
            <div style="background: #FBFBFD; border: 1px solid #E5E5EA; padding: 15px; border-radius: 12px;">
                <p id="session-desc" style="font-size: 13px; margin: 0 0 10px; line-height: 1.5; color: var(--text-main);"></p>
                <a id="citation-link" href="#" target="_blank" style="font-size: 11px; color: var(--apple-blue); text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 4px;">
                    Source Citation ↗
                </a>
            </div>
        </div>
    </div>
</div>

<div id="how-it-works" class="modal">
    <div class="modal-content">
        <div class="close-x" onclick="toggleModal('how-it-works')">✕</div>
        <h1 style="text-align: center; text-transform: uppercase; letter-spacing: -1px;">The Logic Behind The Plan</h1>
        
        <div style="background: white; padding: 40px; border-radius: 28px; margin-top: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
            <div style="border-left: 4px solid var(--apple-blue); padding-left: 20px; margin-bottom: 30px;">
                <h3 style="margin: 0; color: var(--apple-blue); text-transform: uppercase; font-size: 16px;">Background</h3>
                <p style="font-size: 15px; line-height: 1.6; margin-top: 10px; font-weight: 500;">
                    SABERHAWKS77 is built upon the professional framework of <strong>Daniel Wallis</strong>, a <strong>multiple New Zealand representative</strong>, <strong>ALL-NAVY team member</strong>, and <strong>former NIKE Professional Track & Field athlete</strong>. This program translates elite-level championship preparation into a scalable protocol for the Navy PRT.
                </p>
            </div>

            <h3>The Allostatic Advantage</h3>
            <p style="font-size: 14px; line-height: 1.6;">Most programs ignore "Life Stress." We utilize the <strong>McEwen Model of Allostatic Load</strong> to audit readiness. The program pivots in real-time, ensuring high intensities are only used when the physiology is actually capable of adapting.</p>
            
            <h3>Environmental Intelligence</h3>
            <p style="font-size: 14px; line-height: 1.6;">We apply <strong>Astrand-Ryhming</strong> thermal corrections and wind-drag coefficients for NAF Atsugi. This ensures relative effort remains constant regardless of external friction.</p>

            <h3>The Sequence Science</h3>
            <ul style="font-size: 14px; line-height: 1.8;">
                <li><strong>Plank First:</strong> Builds <em>Proximal Stiffness</em> to eliminate energy leaks (Blagrove et al., 2018).</li>
                <li><strong>Push-ups Second:</strong> Induces <em>Lactate Shuttling</em> before the run (Tillaar, 2019).</li>
                <li><strong>The Run:</strong> Execution under pre-existing metabolic load.</li>
            </ul>

            <div style="background: rgba(52, 199, 89, 0.05); padding: 20px; border-radius: 15px; margin-top: 20px;">
                <h4 style="margin:0 0 10px; color:var(--apple-green);">The Psychology of the Taper</h4>
                <p style="font-size: 13px; line-height: 1.5; margin:0;">In Week 6, volume is slashed by 60%. This triggers the unmasking of fitness built in Weeks 1–5. Your body is not losing its edge; it is sharpening it for the PRT line.</p>
            </div>
            <p style="text-align:center; margin-top:40px; font-size:11px; color:var(--text-secondary);">End of Methodology Document</p>
        </div>
    </div>
</div>

<div id="roadmap-modal" class="modal">
    <div class="modal-content">
        <div class="close-x" onclick="toggleModal('roadmap-modal')">✕</div>
        <h1 style="text-align: center;">6-Week Tactical Roadmap</h1>
        <div class="roadmap-grid">
            <div class="week-box"><h4>Week 1: Adaptation</h4><p>Neural Priming. Teaching the brain goal pace rhythm.</p><div class="week-num">1</div></div>
            <div class="week-box"><h4>Week 2: Loading</h4><p>Structural Stress. Building mitochondrial density.</p><div class="week-num">2</div></div>
            <div class="week-box"><h4>Week 3: Development</h4><p>Threshold Expansion. Moving the "red line" further out.</p><div class="week-num">3</div></div>
            <div class="week-box"><h4>Week 4: Overreaching</h4><p>Peak Load. Maximum growth stimulus and allostatic pressure.</p><div class="week-num">4</div></div>
            <div class="week-box"><h4>Week 5: Realization</h4><p>Intensity Maintenance. Holding speed while shedding junk volume.</p><div class="week-num">5</div></div>
            <div class="week-box"><h4>Week 6: Absorption</h4><p>The Taper. Shedding fatigue to reveal your Day 42 Peak.</p><div class="week-num">6</div></div>
        </div>
    </div>
</div>

<footer>&copy; 2026 SABERHAWKS77 | Evidence-Based Athletic Programming</footer>

<script>
    const atsugiWeather = { temp: 10, wind: 8 };

    window.onload = () => {
        const savedDate = localStorage.getItem('saberStart');
        if (savedDate) document.getElementById('startDate').value = savedDate;
        updateUI();
    };

    function updateUI() {
        const sleep = parseInt(document.getElementById('sleep').value) || 0;
        const stress = parseInt(document.getElementById('stress').value) || 0;
        const startDate = document.getElementById('startDate').value;

        if(startDate) {
            localStorage.setItem('saberStart', startDate);
            const diff = Math.floor((new Date() - new Date(startDate)) / (1000 * 60 * 60 * 24)) + 1;
            const currentDay = Math.min(Math.max(diff, 1), 42);
            document.getElementById('day-counter').innerText = `Day ${currentDay}`;
            document.getElementById('days-remaining').innerText = `${42 - currentDay} DAYS TO PEAK`;
        }

        let score = ((sleep + stress) / 6) * 100;
        document.getElementById('ring').style.strokeDashoffset = 502 - (502 * score / 100);
        document.getElementById('percent-text').innerText = `${Math.round(score)}%`;
    }

    function calculateTarget() {
        const surface = document.getElementById('surface').value;
        const curRun = document.getElementById('curRun').value || "12:30";
        const curPush = parseInt(document.getElementById('curPush').value) || 50;
        const curPlank = document.getElementById('curPlank').value || "02:00";
        const day = parseInt(document.getElementById('day-counter').innerText.replace('Day ', '')) || 1;

        let totalSec = (parseInt(curRun.split(':')[0]) * 60) + (parseInt(curRun.split(':')[1]) || 0);
        
        let workoutType = "";
        let runVolumeText = "";
        let runRestText = "";
        let paceAdjust = 1.0;

        if (day % 7 === 0) {
            workoutType = "RECOVERY";
            runVolumeText = "15 MIN EASY JOG";
            runRestText = "STEADY PACE";
            paceAdjust = 1.25; 
        } else if (day % 3 === 0) {
            workoutType = "THRESHOLD";
            runVolumeText = "4 x 800m INTERVALS";
            runRestText = "REST 90s";
            paceAdjust = 0.95; 
        } else {
            workoutType = "BASE";
            runVolumeText = "2 x 1.5 MILES (EASY)";
            runRestText = "REST 3 MIN";
            paceAdjust = 1.1; 
        }

        let intensity = (workoutType === "THRESHOLD") ? 0.9 : (workoutType === "RECOVERY") ? 0.4 : 0.7;

        if (surface === "outside") {
            if (atsugiWeather.temp > 15) totalSec += (atsugiWeather.temp - 15) * 2;
            let split = (totalSec / 7) * paceAdjust;
            document.getElementById('target-run').innerText = split.toFixed(1) + "s";
            document.getElementById('run-volume').innerText = runVolumeText + " (344.8m Split)";
        } else {
            let mph = (1.5 / ((totalSec * paceAdjust) / 3600));
            document.getElementById('target-run').innerText = mph.toFixed(1) + " MPH";
            document.getElementById('run-volume').innerText = runVolumeText;
        }
        document.getElementById('run-rest').innerText = runRestText;

        const pParts = curPlank.split(':');
        const pTotal = (parseInt(pParts[0])*60) + parseInt(pParts[1]);
        const pTarg = Math.round(pTotal * intensity);
        document.getElementById('target-plank').innerText = `${Math.floor(pTarg/60)}:${(pTarg%60).toString().padStart(2,'0')}s`;
        document.getElementById('target-push').innerText = Math.round(curPush * intensity) + " reps";

        const citations = {
            THRESHOLD: {
                desc: "High-intensity interval training (HIIT) at 90-95% heart rate max optimizes mitochondrial biogenesis and stroke volume, directly increasing aerobic-anaerobic transition velocity.",
                url: "https://pubmed.ncbi.nlm.nih.gov/23539281/",
                ref: "Seiler (2013) - Interval Training for Performance"
            },
            RECOVERY: {
                desc: "Sub-maximal aerobic flushing reduces the metabolic cost of the next session by accelerating clearance of systemic inflammation and facilitating parasympathetic reactivation.",
                url: "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5908124/",
                ref: "McEwen & Stellar - Allostatic Load Science"
            },
            BASE: {
                desc: "Concurrent strength and endurance training improves running economy by enhancing musculotendinous stiffness, allowing for higher force production with lower oxygen consumption.",
                url: "https://pubmed.ncbi.nlm.nih.gov/29249183/",
                ref: "Blagrove et al. (2018) - Running Economy & Strength"
            }
        };

        const selectedCite = citations[workoutType];
        document.getElementById('session-desc').innerText = selectedCite.desc;
        document.getElementById('citation-link').href = selectedCite.url;
        document.getElementById('citation-link').innerText = `Source: ${selectedCite.ref} ↗`;

        document.getElementById('tier-display').innerText = (day < 35) ? "PROJECTED: OUTSTANDING" : "PEAK: OUTSTANDING";
        document.getElementById('tier-note').innerText = (day < 35) ? "Fatigue is currently masking performance. Week 6 taper will reveal peak scores." : "Taper complete.";

        document.getElementById('output-section').style.display = 'flex';
        window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'});
    }

    function toggleModal(id) {
        const m = document.getElementById(id);
        m.style.display = (m.style.display === 'block') ? 'none' : 'block';
        if (m.style.display === 'block') {
            document.body.style.overflow = 'hidden';
        } else {
            document.body.style.overflow = 'auto';
        }
    }

    function resetApp() { window.scrollTo({top: 0, behavior: 'smooth'}); }
</script>
</body>
</html>
